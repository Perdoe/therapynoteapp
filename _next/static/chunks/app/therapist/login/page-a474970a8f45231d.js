(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{973:(e,t,s)=>{Promise.resolve().then(s.bind(s,4315))},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var a=s(2596),r=s(9688);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},4315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),r=s(2115),o=s(5695),i=s(6413),l=s(760),n=s(4860),c=s(9852),d=s(7168),m=s(6874),h=s.n(m),u=s(7550),p=s(4416),g=s(5594);let x={saveTherapist:e=>{console.log("DevStorage - Saving therapist:",e);try{let e={};try{e=JSON.parse(localStorage.getItem("therapists")||"{}")}catch(e){console.error("DevStorage - Error parsing existing therapists:",e)}localStorage.setItem("therapists",JSON.stringify(e));let t=localStorage.getItem("therapists");return console.log("DevStorage - Stored therapists after save:",t),!0}catch(e){return console.error("DevStorage - Error saving therapist:",e),!1}}},f=g.z.object({firstName:g.z.string().min(2,"First name must be at least 2 characters"),lastName:g.z.string().min(2,"Last name must be at least 2 characters"),email:g.z.string().email("Invalid email address"),password:g.z.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:g.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function w(){let e=(0,o.useRouter)(),{setTherapist:t}=(0,n.Q)(),[s,m]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[P,S]=(0,r.useState)(!1),[k,D]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[F,E]=(0,r.useState)({}),[C,A]=(0,r.useState)(!1),I=async a=>{a.preventDefault(),N(""),j(!0),console.log("Login - Attempting with:",{therapistId:s,password:w}),console.log("Login - All stored therapists:",JSON.parse(localStorage.getItem("therapists")||"{}"));try{await t({id:s,password:w})?e.push("/therapist"):N("Invalid credentials. Please try again.")}catch(e){console.error("Login error:",e),N("An error occurred during login. Please try again.")}finally{j(!1)}},z=(e,t)=>{try{"password"===e?(f.shape.password.parse(t),E(e=>({...e,password:""})),k.confirmPassword&&(t===k.confirmPassword?E(e=>({...e,confirmPassword:""})):E(e=>({...e,confirmPassword:"Passwords don't match"})))):"confirmPassword"===e?t===k.password?E(e=>({...e,confirmPassword:""})):E(e=>({...e,confirmPassword:"Passwords don't match"})):(f.pick({[e]:!0}).parse({[e]:t}),E(t=>({...t,[e]:""})))}catch(t){t instanceof g.z.ZodError&&E(s=>({...s,[e]:t.errors[0].message}))}},_=e=>t=>{let s=t.target.value;D(t=>({...t,[e]:s})),z(e,s)},B=()=>{D({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),E({}),A(!1)},O=async s=>{s.preventDefault(),A(!0);try{let s=f.parse(k),a="T".concat(Date.now());console.log("Registration - Generated new therapist ID:",a);let r={therapist_id:a,first_name:s.firstName,last_name:s.lastName,password:s.password,email:s.email,created_at:new Date().toISOString()};console.log("Registration - About to save therapist:",r);let o=x.saveTherapist(r);console.log("Registration - Save result:",o);let i=JSON.parse(localStorage.getItem("therapists")||"{}");if(console.log("Registration - All stored therapists:",i),alert("Your Provider ID is: ".concat(a,"\nPlease save this ID for logging in.")),console.log("Registration - Attempting immediate login with:",{id:a,password:s.password}),await t({id:a,password:s.password}))S(!1),e.push("/therapist");else throw Error("Failed to log in with new account")}catch(e){if(console.error("Registration error:",e),e instanceof g.z.ZodError){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),E(t)}else E({form:e instanceof Error?e.message:"Failed to create account"})}finally{A(!1)}};return(0,a.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-[10%] left-[15%] w-[40vw] h-[40vw] bg-[#FFB5D0] organic-shape-2 floating-slow opacity-70"}),(0,a.jsx)("div",{className:"absolute bottom-[20%] right-[10%] w-[35vw] h-[35vw] bg-[#B4F0E0] organic-shape floating opacity-70"}),(0,a.jsx)("div",{className:"absolute top-[40%] right-[20%] w-[25vw] h-[25vw] bg-[#D8B4F0] organic-shape-3 floating-fast opacity-70"}),(0,a.jsx)("div",{className:"absolute bottom-[10%] left-[25%] w-[30vw] h-[30vw] bg-[#F0B4D8] organic-shape floating opacity-70"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)(h(),{href:"/",className:"inline-flex items-center text-[#333] hover:text-[#555] transition-colors mb-8",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 mr-2"}),"Back to Home"]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-handwritten text-center mb-6 text-[#333]",children:"Welcome"}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"therapistId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID"}),(0,a.jsx)(c.p,{id:"therapistId",type:"text",value:s,onChange:e=>m(e.target.value),placeholder:"Enter your provider ID",required:!0,className:"w-full bg-white/70 backdrop-blur-sm border-0 focus:ring-2 focus:ring-[#D8B4F0]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(c.p,{id:"password",type:"password",value:w,onChange:e=>b(e.target.value),placeholder:"Enter your password",required:!0,className:"w-full bg-white/70 backdrop-blur-sm border-0 focus:ring-2 focus:ring-[#D8B4F0]"})]}),v&&(0,a.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded-lg",children:v}),(0,a.jsx)(d.$,{type:"submit",className:"w-full bg-[#D8B4F0] hover:bg-[#D8B4F0]/90 text-white transition-all duration-200 transform hover:scale-[1.02]",disabled:y||w.length<8,children:y?"Signing in...":"Sign In"}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>S(!0),className:"text-[#D8B4F0] hover:underline",children:"Create one here"})]})})]}),!1]})]}),(0,a.jsx)(l.N,{children:P&&(0,a.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(i.P.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md relative",children:[(0,a.jsx)("button",{onClick:()=>{B(),S(!1)},className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p.A,{className:"h-5 w-5"})}),(0,a.jsx)("h2",{className:"text-2xl font-handwritten mb-6 text-center",children:"Create Provider Account"}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,a.jsx)(c.p,{id:"firstName",type:"text",value:k.firstName,onChange:_("firstName"),placeholder:"Enter your first name",className:F.firstName?"border-red-500":""}),F.firstName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:F.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,a.jsx)(c.p,{id:"lastName",type:"text",value:k.lastName,onChange:_("lastName"),placeholder:"Enter your last name",className:F.lastName?"border-red-500":""}),F.lastName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:F.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"regEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)(c.p,{id:"regEmail",type:"email",value:k.email,onChange:_("email"),placeholder:"Enter your email address",className:F.email?"border-red-500":""}),F.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:F.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"regPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(c.p,{id:"regPassword",type:"password",value:k.password,onChange:_("password"),placeholder:"Enter your password",className:F.password?"border-red-500":""}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Password must contain:",(0,a.jsxs)("ul",{className:"list-disc list-inside",children:[(0,a.jsx)("li",{className:k.password.length>=8?"text-green-500":"",children:"At least 8 characters"}),(0,a.jsx)("li",{className:/[A-Z]/.test(k.password)?"text-green-500":"",children:"One uppercase letter"}),(0,a.jsx)("li",{className:/[a-z]/.test(k.password)?"text-green-500":"",children:"One lowercase letter"}),(0,a.jsx)("li",{className:/[0-9]/.test(k.password)?"text-green-500":"",children:"One number"}),(0,a.jsx)("li",{className:/[^A-Za-z0-9]/.test(k.password)?"text-green-500":"",children:"One special character"})]})]}),F.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:F.password})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,a.jsx)(c.p,{id:"confirmPassword",type:"password",value:k.confirmPassword,onChange:_("confirmPassword"),placeholder:"Confirm your password",className:F.confirmPassword?"border-red-500":""}),F.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:F.confirmPassword})]}),(0,a.jsx)(d.$,{type:"submit",className:"w-full bg-[#D8B4F0] hover:bg-[#D8B4F0]/90 text-white",disabled:C||Object.keys(F).some(e=>F[e]),children:C?"Creating Account...":"Create Account"})]})]})})})]})}},4860:(e,t,s)=>{"use strict";s.d(t,{Q:()=>l,TherapistProvider:()=>i});var a=s(5155),r=s(2115);let o=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[l,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),m=async e=>{n(!0),d(null);try{if(console.log("Attempting login with credentials:",e),"101"===e.id&&"therapy123"===e.password)return console.log("Logging in as dummy therapist"),i({id:"101",firstName:"Default",lastName:"Therapist"}),!0;let t=JSON.parse(localStorage.getItem("therapists")||"{}");console.log("Checking stored therapists:",t);let s=t[e.id];if(console.log("Found therapist:",s),s&&s.password===e.password)return i({id:s.therapist_id,firstName:s.first_name,lastName:s.last_name,email:s.email}),!0;return!1}catch(e){return console.error("Error in setTherapist:",e),d("Failed to authenticate"),!1}finally{n(!1)}};return(0,a.jsxs)(o.Provider,{value:{therapist:s,isLoading:l,error:c,setTherapist:m,logout:()=>{i(null)}},children:[!1,t]})}function l(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useTherapist must be used within a TherapistProvider");return e}},7168:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),r=s(2115),o=s(9708),i=s(2085),l=s(3999);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,m=c?o.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(n({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},9852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(5155),r=s(2115),o=s(3999);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[413,874,817,28,441,684,358],()=>t(973)),_N_E=e.O()}]);