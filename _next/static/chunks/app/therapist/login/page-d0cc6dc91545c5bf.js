(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{973:(e,t,r)=>{Promise.resolve().then(r.bind(r,9122))},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2596),s=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4860:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n,TherapistProvider:()=>l});var a=r(5155),s=r(2115),o=r(7853);let i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0),[d,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{{o.V.initializeStorage();let e=localStorage.getItem("currentTherapistId");if(e){let t=o.V.getTherapist(e);t&&l({id:t.therapist_id,firstName:t.first_name,lastName:t.last_name,email:t.email})}c(!1)}},[]);let g=async e=>{c(!0),m(null);try{var t;if(console.log("Attempting login with credentials:",e),"101"===e.id&&"therapy123"===e.password)return console.log("Logging in as dummy therapist"),l({id:"101",firstName:"Default",lastName:"Therapist"}),localStorage.setItem("currentTherapistId",e.id),!0;let r=JSON.parse(localStorage.getItem("therapists")||"{}");console.log("Checking stored therapists:",r);let a=null==(t=r[e.id])?void 0:t[0];if(console.log("Found therapist:",a),a&&a.password===e.password)return l({id:a.therapist_id,firstName:a.first_name,lastName:a.last_name,email:a.email}),localStorage.setItem("currentTherapistId",e.id),!0;return!1}catch(e){return console.error("Error in setTherapist:",e),m("Failed to authenticate"),!1}finally{c(!1)}};return(0,a.jsxs)(i.Provider,{value:{therapist:r,isLoading:n,error:d,setTherapist:g,logout:()=>{l(null),localStorage.removeItem("currentTherapistId")}},children:[!1,t]})}function n(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTherapist must be used within a TherapistProvider");return e}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),s=r(2115),o=r(9708),i=r(2085),l=r(3999);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,m=c?o.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(n({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},7853:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});let a={saveTherapist:e=>{console.log("DevStorage - Saving therapist:",e);try{let t={};try{t=JSON.parse(localStorage.getItem("therapists")||"{}")}catch(e){console.error("DevStorage - Error parsing existing therapists:",e)}t[e.therapist_id]=[e],localStorage.setItem("therapists",JSON.stringify(t));let r=localStorage.getItem("therapists");return console.log("DevStorage - Stored therapists after save:",r),!0}catch(e){return console.error("DevStorage - Error saving therapist:",e),!1}},getTherapist:e=>{console.log("DevStorage - Getting therapist with ID:",e);try{var t;let r=JSON.parse(localStorage.getItem("therapists")||"{}");console.log("DevStorage - All stored therapists:",r);let a=null==(t=r[e])?void 0:t[0];return console.log("DevStorage - Found therapist:",a),a}catch(e){return console.error("DevStorage - Error getting therapist:",e),null}},getPatientsByTherapist:e=>{console.log("DevStorage - Getting patients for therapist:",e);try{return JSON.parse(localStorage.getItem("patients")||"{}")[e]||[]}catch(e){return console.error("DevStorage - Error getting patients:",e),[]}},getPatient:e=>{console.log("DevStorage - Getting patient with ID:",e);try{let t=JSON.parse(localStorage.getItem("patients")||"{}");for(let r in t){let a=t[r].find(t=>t.patient_id===e);if(a)return console.log("DevStorage - Found patient:",a),a}return console.log("DevStorage - No patient found with ID:",e),null}catch(e){return console.error("DevStorage - Error getting patient:",e),null}},initDummyTherapist:()=>{console.log("DevStorage - Initializing dummy therapist");try{let e=JSON.parse(localStorage.getItem("therapists")||"{}");e["101"]?console.log("DevStorage - Dummy therapist already exists:",e["101"]):(e["101"]=[{therapist_id:"101",first_name:"Default",last_name:"Therapist",password:"therapy123",created_at:new Date().toISOString()}],localStorage.setItem("therapists",JSON.stringify(e)),console.log("DevStorage - Dummy therapist initialized:",e["101"]))}catch(e){console.error("DevStorage - Error initializing dummy therapist:",e)}},initializeStorage:()=>{console.log("DevStorage - Initializing sample data"),a.initDummyTherapist();let e=[{patient_id:"1745013352290",first_name:"Sarah",last_name:"Johnson",age:28,pronouns:"She/Her",therapist_id:"101",created_at:new Date().toISOString()},{patient_id:"1745013352291",first_name:"Michael",last_name:"Brown",age:35,pronouns:"He/Him",therapist_id:"101",created_at:new Date().toISOString()}];try{if(!localStorage.getItem("patients")){let t={};t["101"]=e,localStorage.setItem("patients",JSON.stringify(t)),console.log("DevStorage - Initialized patients:",t)}}catch(e){console.error("DevStorage - Error initializing sample data:",e)}},clearStorage:()=>{localStorage.removeItem("therapists"),localStorage.removeItem("patients"),localStorage.removeItem("currentTherapistId"),localStorage.removeItem("currentPatientId"),console.log("DevStorage - Cleared all storage")}}},9122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),s=r(2115),o=r(5695),i=r(6413),l=r(760),n=r(4860),c=r(9852),d=r(7168),m=r(6874),g=r.n(m),p=r(7550),h=r(4416),u=r(5594),f=r(7853);let x=u.z.object({firstName:u.z.string().min(2,"First name must be at least 2 characters"),lastName:u.z.string().min(2,"Last name must be at least 2 characters"),email:u.z.string().email("Invalid email address"),password:u.z.string().min(8,"Password must be at least 8 characters").regex(/[A-Z]/,"Password must contain at least one uppercase letter").regex(/[a-z]/,"Password must contain at least one lowercase letter").regex(/[0-9]/,"Password must contain at least one number").regex(/[^A-Za-z0-9]/,"Password must contain at least one special character"),confirmPassword:u.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function v(){let e=(0,o.useRouter)(),{setTherapist:t}=(0,n.Q)(),[r,m]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[b,N]=(0,s.useState)(""),[y,S]=(0,s.useState)(!1),[j,D]=(0,s.useState)(!1),[P,I]=(0,s.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),[_,E]=(0,s.useState)({}),[F,k]=(0,s.useState)(!1),z=async a=>{a.preventDefault(),N(""),S(!0),console.log("Login - Attempting with:",{therapistId:r,password:v}),console.log("Login - All stored therapists:",JSON.parse(localStorage.getItem("therapists")||"{}"));try{await t({id:r,password:v})?e.push("/therapist"):N("Invalid credentials. Please try again.")}catch(e){console.error("Login error:",e),N("An error occurred during login. Please try again.")}finally{S(!1)}},O=(e,t)=>{try{"password"===e?(x.shape.password.parse(t),E(e=>({...e,password:""})),P.confirmPassword&&(t===P.confirmPassword?E(e=>({...e,confirmPassword:""})):E(e=>({...e,confirmPassword:"Passwords don't match"})))):"confirmPassword"===e?t===P.password?E(e=>({...e,confirmPassword:""})):E(e=>({...e,confirmPassword:"Passwords don't match"})):(x.pick({[e]:!0}).parse({[e]:t}),E(t=>({...t,[e]:""})))}catch(t){t instanceof u.z.ZodError&&E(r=>({...r,[e]:t.errors[0].message}))}},C=e=>t=>{let r=t.target.value;I(t=>({...t,[e]:r})),O(e,r)},A=()=>{I({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),E({}),k(!1)},T=async r=>{r.preventDefault(),k(!0);try{let r=x.parse(P),a="T".concat(Date.now());console.log("Registration - Generated new therapist ID:",a);let s={therapist_id:a,first_name:r.firstName,last_name:r.lastName,password:r.password,email:r.email,created_at:new Date().toISOString()};console.log("Registration - About to save therapist:",s);let o=f.V.saveTherapist(s);console.log("Registration - Save result:",o);let i=JSON.parse(localStorage.getItem("therapists")||"{}");if(console.log("Registration - All stored therapists:",i),alert("Your Provider ID is: ".concat(a,"\nPlease save this ID for logging in.")),console.log("Registration - Attempting immediate login with:",{id:a,password:r.password}),await t({id:a,password:r.password}))D(!1),e.push("/therapist");else throw Error("Failed to log in with new account")}catch(e){if(console.error("Registration error:",e),e instanceof u.z.ZodError){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),E(t)}else E({form:e instanceof Error?e.message:"Failed to create account"})}finally{k(!1)}};return(0,a.jsxs)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-[10%] left-[15%] w-[40vw] h-[40vw] bg-[#FFB5D0] organic-shape-2 floating-slow opacity-70"}),(0,a.jsx)("div",{className:"absolute bottom-[20%] right-[10%] w-[35vw] h-[35vw] bg-[#B4F0E0] organic-shape floating opacity-70"}),(0,a.jsx)("div",{className:"absolute top-[40%] right-[20%] w-[25vw] h-[25vw] bg-[#D8B4F0] organic-shape-3 floating-fast opacity-70"}),(0,a.jsx)("div",{className:"absolute bottom-[10%] left-[25%] w-[30vw] h-[30vw] bg-[#F0B4D8] organic-shape floating opacity-70"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)(g(),{href:"/",className:"inline-flex items-center text-[#333] hover:text-[#555] transition-colors mb-8",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 mr-2"}),"Back to Home"]}),(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg p-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-handwritten text-center mb-6 text-[#333]",children:"Welcome"}),(0,a.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"therapistId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider ID"}),(0,a.jsx)(c.p,{id:"therapistId",type:"text",value:r,onChange:e=>m(e.target.value),placeholder:"Enter your provider ID",required:!0,className:"w-full bg-white/70 backdrop-blur-sm border-0 focus:ring-2 focus:ring-[#D8B4F0]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(c.p,{id:"password",type:"password",value:v,onChange:e=>w(e.target.value),placeholder:"Enter your password",required:!0,className:"w-full bg-white/70 backdrop-blur-sm border-0 focus:ring-2 focus:ring-[#D8B4F0]"})]}),b&&(0,a.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center bg-red-50 p-2 rounded-lg",children:b}),(0,a.jsx)(d.$,{type:"submit",className:"w-full bg-[#D8B4F0] hover:bg-[#D8B4F0]/90 text-white transition-all duration-200 transform hover:scale-[1.02]",disabled:y||v.length<8,children:y?"Signing in...":"Sign In"}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,a.jsx)("button",{type:"button",onClick:()=>D(!0),className:"text-[#D8B4F0] hover:underline",children:"Create one here"})]})})]}),!1]})]}),(0,a.jsx)(l.N,{children:j&&(0,a.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)(i.P.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md relative",children:[(0,a.jsx)("button",{onClick:()=>{A(),D(!1)},className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(h.A,{className:"h-5 w-5"})}),(0,a.jsx)("h2",{className:"text-2xl font-handwritten mb-6 text-center",children:"Create Provider Account"}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,a.jsx)(c.p,{id:"firstName",type:"text",value:P.firstName,onChange:C("firstName"),placeholder:"Enter your first name",className:_.firstName?"border-red-500":""}),_.firstName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:_.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,a.jsx)(c.p,{id:"lastName",type:"text",value:P.lastName,onChange:C("lastName"),placeholder:"Enter your last name",className:_.lastName?"border-red-500":""}),_.lastName&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:_.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"regEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)(c.p,{id:"regEmail",type:"email",value:P.email,onChange:C("email"),placeholder:"Enter your email address",className:_.email?"border-red-500":""}),_.email&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:_.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"regPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(c.p,{id:"regPassword",type:"password",value:P.password,onChange:C("password"),placeholder:"Enter your password",className:_.password?"border-red-500":""}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Password must contain:",(0,a.jsxs)("ul",{className:"list-disc list-inside",children:[(0,a.jsx)("li",{className:P.password.length>=8?"text-green-500":"",children:"At least 8 characters"}),(0,a.jsx)("li",{className:/[A-Z]/.test(P.password)?"text-green-500":"",children:"One uppercase letter"}),(0,a.jsx)("li",{className:/[a-z]/.test(P.password)?"text-green-500":"",children:"One lowercase letter"}),(0,a.jsx)("li",{className:/[0-9]/.test(P.password)?"text-green-500":"",children:"One number"}),(0,a.jsx)("li",{className:/[^A-Za-z0-9]/.test(P.password)?"text-green-500":"",children:"One special character"})]})]}),_.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:_.password})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,a.jsx)(c.p,{id:"confirmPassword",type:"password",value:P.confirmPassword,onChange:C("confirmPassword"),placeholder:"Confirm your password",className:_.confirmPassword?"border-red-500":""}),_.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-500",children:_.confirmPassword})]}),(0,a.jsx)(d.$,{type:"submit",className:"w-full bg-[#D8B4F0] hover:bg-[#D8B4F0]/90 text-white",disabled:F||Object.keys(_).some(e=>_[e]),children:F?"Creating Account...":"Create Account"})]})]})})})]})}},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(5155),s=r(2115),o=r(3999);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[496,817,28,441,684,358],()=>t(973)),_N_E=e.O()}]);