(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3159:(e,t,r)=>{Promise.resolve().then(r.bind(r,4860)),Promise.resolve().then(r.t.bind(r,6979,23)),Promise.resolve().then(r.t.bind(r,7639,23)),Promise.resolve().then(r.t.bind(r,9324,23))},4860:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n,TherapistProvider:()=>l});var a=r(5155),o=r(2115),i=r(7853);let s=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)(null),[n,g]=(0,o.useState)(!0),[c,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{{i.V.initializeStorage();let e=localStorage.getItem("currentTherapistId");if(e){let t=i.V.getTherapist(e);t&&l({id:t.therapist_id,firstName:t.first_name,lastName:t.last_name,email:t.email})}g(!1)}},[]);let h=async e=>{g(!0),p(null);try{var t;if(console.log("Attempting login with credentials:",e),"101"===e.id&&"therapy123"===e.password)return console.log("Logging in as dummy therapist"),l({id:"101",firstName:"Default",lastName:"Therapist"}),localStorage.setItem("currentTherapistId",e.id),!0;let r=JSON.parse(localStorage.getItem("therapists")||"{}");console.log("Checking stored therapists:",r);let a=null==(t=r[e.id])?void 0:t[0];if(console.log("Found therapist:",a),a&&a.password===e.password)return l({id:a.therapist_id,firstName:a.first_name,lastName:a.last_name,email:a.email}),localStorage.setItem("currentTherapistId",e.id),!0;return!1}catch(e){return console.error("Error in setTherapist:",e),p("Failed to authenticate"),!1}finally{g(!1)}};return(0,a.jsxs)(s.Provider,{value:{therapist:r,isLoading:n,error:c,setTherapist:h,logout:()=>{l(null),localStorage.removeItem("currentTherapistId")}},children:[!1,t]})}function n(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useTherapist must be used within a TherapistProvider");return e}},6979:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_00abc8",variable:"__variable_00abc8"}},7639:e=>{e.exports={style:{fontFamily:"'Caveat', 'Caveat Fallback'",fontStyle:"normal"},className:"__className_5b28e3",variable:"__variable_5b28e3"}},7853:(e,t,r)=>{"use strict";r.d(t,{V:()=>a});let a={saveTherapist:e=>{console.log("DevStorage - Saving therapist:",e);try{let t={};try{t=JSON.parse(localStorage.getItem("therapists")||"{}")}catch(e){console.error("DevStorage - Error parsing existing therapists:",e)}t[e.therapist_id]=[e],localStorage.setItem("therapists",JSON.stringify(t));let r=localStorage.getItem("therapists");return console.log("DevStorage - Stored therapists after save:",r),!0}catch(e){return console.error("DevStorage - Error saving therapist:",e),!1}},getTherapist:e=>{console.log("DevStorage - Getting therapist with ID:",e);try{var t;let r=JSON.parse(localStorage.getItem("therapists")||"{}");console.log("DevStorage - All stored therapists:",r);let a=null==(t=r[e])?void 0:t[0];return console.log("DevStorage - Found therapist:",a),a}catch(e){return console.error("DevStorage - Error getting therapist:",e),null}},getPatientsByTherapist:e=>{console.log("DevStorage - Getting patients for therapist:",e);try{return JSON.parse(localStorage.getItem("patients")||"{}")[e]||[]}catch(e){return console.error("DevStorage - Error getting patients:",e),[]}},getPatient:e=>{console.log("DevStorage - Getting patient with ID:",e);try{let t=JSON.parse(localStorage.getItem("patients")||"{}");for(let r in t){let a=t[r].find(t=>t.patient_id===e);if(a)return console.log("DevStorage - Found patient:",a),a}return console.log("DevStorage - No patient found with ID:",e),null}catch(e){return console.error("DevStorage - Error getting patient:",e),null}},initDummyTherapist:()=>{console.log("DevStorage - Initializing dummy therapist");try{let e=JSON.parse(localStorage.getItem("therapists")||"{}");e["101"]?console.log("DevStorage - Dummy therapist already exists:",e["101"]):(e["101"]=[{therapist_id:"101",first_name:"Default",last_name:"Therapist",password:"therapy123",created_at:new Date().toISOString()}],localStorage.setItem("therapists",JSON.stringify(e)),console.log("DevStorage - Dummy therapist initialized:",e["101"]))}catch(e){console.error("DevStorage - Error initializing dummy therapist:",e)}},initializeStorage:()=>{console.log("DevStorage - Initializing sample data"),a.initDummyTherapist();let e=[{patient_id:"1745013352290",first_name:"Sarah",last_name:"Johnson",age:28,pronouns:"She/Her",therapist_id:"101",created_at:new Date().toISOString()},{patient_id:"1745013352291",first_name:"Michael",last_name:"Brown",age:35,pronouns:"He/Him",therapist_id:"101",created_at:new Date().toISOString()}];try{if(!localStorage.getItem("patients")){let t={};t["101"]=e,localStorage.setItem("patients",JSON.stringify(t)),console.log("DevStorage - Initialized patients:",t)}}catch(e){console.error("DevStorage - Error initializing sample data:",e)}},clearStorage:()=>{localStorage.removeItem("therapists"),localStorage.removeItem("patients"),localStorage.removeItem("currentTherapistId"),localStorage.removeItem("currentPatientId"),console.log("DevStorage - Cleared all storage")}}},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[90,441,684,358],()=>t(3159)),_N_E=e.O()}]);